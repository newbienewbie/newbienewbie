---
layout: post
title: 数据库笔记 关系演算
date: 2017-10-28 15:21:37
tags:
- 数据库
- 数据库理论 
- 关系代数
- 关系演算
categories:
- 大道
- 数据库
- 数据库理论 
---

关系演算包括 *元组关系演算* 和 *域关系演算* 。

## 元组关系演算

元组关系演算表达式一般形式为`$\{t\mid \varphi(t)\}$`，其中`t`为元组变量，`$\varphi(t)$`是以元组变量`$t$`为基础的公式。

0. `$\lor$`、`$\land$`、`$\lnot$`分别表示逻辑运算的或、且、非。
1. `$(\exists t) (\varphi)$`：表示至少有一个元组`$t$`使得`$\varphi$`为真。`$\exists$`称之为 *存在量词*
2. `$(\forall t) (\varphi)$`：表示对于所有的元组`$t$`都使得`$\varphi$`为真。`$\forall$`称之为 *全称量词*

<!--more-->

### 原子公式的含义

1. `$R(t)$`表示t是关系R的一个元组。
    * 例如:`$\{t| R(t) \lor S(t)\}$`表示`$t$`是关系`$R$`或者`$S$`的一个元组，等价于关系代数中的`$R \bigcup S$`。
    * 再如：`$\{t| R(t) \land S(t)\}$`，表示`$t$`既是关系`$R$`也是关系`$S$`中的一个元组，等价于关系代数中的`$R \bigcap S$`。
2. 用`$t[i]$`表示元组的第`$i$`个分量，`$\theta$`表示某种算术运算。则`$t[i] \;\theta\; s[j]$` 表示元组`$t$`的第`$i$`个分量与元组`$s$`的第`$j$`个分量进行`$\theta$`运算后为真。
    * 例如:`$\{t|(\exists s) (R(t) \land S(t) \land t[1] =s[2])\}$`表示`$t$`是关系`$R$`的元组，并且，`$\exists s \in S$`，使得`$t[i]$`与`$s[2]$`相等。
    * 再如：`$\{t|(\forall s) (R(t) \land S(t) \land t[2] > s[1])\}$`表示`$t$`是关系`$R$`的元组，并且，对`$\forall s \in S$`，都有`$t[i] > s[2]$`。
3. 用`$C$`表示某个常量，则`$t[i] \;\theta\; C$` 表示元组`$t$`的第`$i$`个分量与常量`$C$`进行`$\theta$`运算后为真；类似的，`$C \;\theta\; t[i]$` 表示常量`$C$`与元组`$t$`的第`$i$`个分量进行`$\theta$`运算后为真。

### 与关系代数的关系：

与关系代数表达力相同：

1. `$R \bigcup S$`等价于 `$\{t| R(t) \lor S(t)\}$`。
2. `$R \bigcap S$`等价于 `$\{t| R(t) \land S(t)\}$`。
3. `$R - S $`等价于`$\{t| R(t) \land \lnot S(t)\}$`
4. `$\sigma_C(R)$`等价于`$\{t| R(t) \land C' \}$`
5. `$\pi_{i_1,i_2,...i_n}$`等价于`$\{t| (\exists r) (R(r) \land t[1]=r[t_2] \land t[2]=r[t_2]) \land t[n]=r[i_n] \}$`
6. `$R \times S$`等价于`$\{t^{(m+n)}| (\exists r^{(m)})(\exists s^{(n)}) (R(r)\land S(s) \land t[1]=r[1] \land t[2]=s[2] ... \land t[m]=r[m] \land t[m+1]=s[1] \land t[m+n]=s[n]) \}$`

## 域关系演算

与元组关系演算的表达式用的是元组变量不同，域关系演算用的是元组分量的变量，简称域变量。域变量的变化范围是某个值域，而不是某个关系。

### 原子公式

1. `$R(x_1,x_2,...,x_k)$`：`$R$`为关系,`$x_i$`为`$R$`的域变量或者常量。如果`$(x_1,x_2,x_3,...x_k)$`是`R`的一个元组，则`$R(x_1,x_2,...,x_k)$`为真。
2. `$x \theta y$`: `$x$`和`$y$`为常量或者域变量，`$\theta$`为算术运算符，如果`$x$`和`$y$`满足`$\theta$`关系，则`$x \theta y$`为真

### 基本含义

域关系演算表达式的一般形式为`$\{(x_1,x_2,...,x_k)| \varphi(x_1,x_2,...,x_k) \}$`，含义为：使`$\varphi$`为真的域变量`$x_1,x_2,...,x_k$`组成的元组的集合。

域关系演算、元组关系演算、关系代数三者的表达能力是一样的。

